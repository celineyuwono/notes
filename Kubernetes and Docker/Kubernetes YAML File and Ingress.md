## Kubernetes YAML File and Ingress

### [https://www.youtube.com/watch?v=qmDzcu5uY1I&list=PLy7NrYWoggjw0OMxUDIImjWQjM7qZWn_R&index=5](https://www.youtube.com/watch?v=qmDzcu5uY1I&list=PLy7NrYWoggjw0OMxUDIImjWQjM7qZWn_R&index=5)

### YAML File
- There are 3 parts to YAML File (Deployment and Service YAML files):
	- **Metadata**
	- **Specification:** Depends on **deployment** or **service** YAML file.
	- **Status:** Generated by Kubernetes. Kubernetes always compares *desired state (specification)* and *actual state (state)*. Kubernetes get status data from **etcd**.

### Deployment vs Service YAML Files
- **Deployment**: Responsible for keeping a set of pods running.
- **Service**: Responsible for enabling network access to a set of pods.

### Source URL:  [https://www.youtube.com/watch?v=qmDzcu5uY1I&list=PLy7NrYWoggjw0OMxUDIImjWQjM7qZWn_R&index=5](https://www.youtube.com/watch?v=qmDzcu5uY1I&list=PLy7NrYWoggjw0OMxUDIImjWQjM7qZWn_R&index=5)
### Ingress
- You can access port through service using: `<IP of Node>:<Port>` but we want through domain name. And this requires exposing port to outside.
- We use `Ingress -> service -> pod`.
- Ingress has routing rules.
![Ansible Playbooks YAML File](https://i.ibb.co/S6qSsTr/Screen-Shot-2020-08-18-at-10-29-26.png)- Can use variables.
- `A play=hosts + user + task`
- One playbook can contain multiple plays.
- Playbook describes:
	- How and which order.
	- At what time and where (which machine).
	- What modules should be executed.
- You can name your playbooks using the `name` attribute.
- **Ansible inventory list:** Defines hosts that is in plays. Inventory are all machines that is involved in task execution.  It groups multiple IP Addresses or host names into 1 group. So if you have a play that must be executed to 20 of your databases. You can group the 20 databases under `[database]` and refer to `[database]` group to run all your plays. IP can be that of cloud instance, vm (Vagrant container), or bare metal servers.
![Screen-Shot-2020-08-18-at-10-29-37](https://i.ibb.co/kcM1j5z/Screen-Shot-2020-08-18-at-10-29-37.png)
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIwNTg3MDAyMzEsMjA1NDE3ODU3Nl19
-->